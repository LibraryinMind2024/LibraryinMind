<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>회원 정보 수정하기</title>
    <link rel="stylesheet" href="css/update.css">
    <link rel="stylesheet" href="css/update_rp.css">
    <link rel="stylesheet" href="https://webfontworld.github.io/NanumSquare/NanumSquare.css">
    <link rel="icon" type="image/png" href="image/notebook_icon.png">

</head>
<body>

<header>
    <img src="image/notebook_icon.png" alt="Notebook Icon">
    <a href="main"><h1>일기 속 도서관</h1></a>
    <nav>
        <ul>
            <li><a href="recommend">도서 추천</a></li>
            <li><a href="my_library">도서함</a></li>
            <li><a href="mypage">내 정보</a></li>
        </ul>
    </nav>
</header>

<!-- 회원 정보 수정 섹션 -->
<div class="mypage-container">
    <h2>회원 정보 수정하기</h2>

    <!-- 수정 폼 -->
    <form action="/update" method="POST" onsubmit="return validatePasswords()">
        <div class="input-container">
            <label for="name">이름:</label>
            <input type="text" id="name" name="name" th:value="${user.name}" required>
        </div>

        <div class="input-container">
            <label for="username">아이디:</label>
            <input type="text" id="username" name="username" th:value="${user.username}" required>
        </div>

        <div class="input-container">
            <label for="password">비밀번호:</label>
            <input type="password" id="password" name="password" required>
        </div>

        <div class="input-container">
            <label for="confirm-password">비밀번호 확인:</label>
            <input type="password" id="confirm-password" name="confirm-password" required>
        </div>

        <div id="error-message" style="color: red; margin-top: 10px;"></div>

        <!-- 수정 버튼 -->
        <button type="submit" class="edit-button">수정하기</button>
    </form>
</div>

<script>
    function validatePasswords() {
        const password = document.getElementById("password").value;
        const confirmPassword = document.getElementById("confirm-password").value;
        const errorMessage = document.getElementById("error-message");

        if (password !== confirmPassword) {
            errorMessage.textContent = "비밀번호와 비밀번호 확인이 일치하지 않습니다. 다시 확인해주세요!";
            return false; // 폼 제출을 막습니다.
        } else {
            errorMessage.textContent = "";
            return true;
        }
    }
</script>

</body>
</html>
