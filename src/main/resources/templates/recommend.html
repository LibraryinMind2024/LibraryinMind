<!--<!DOCTYPE html>-->
<!--<html lang="ko" xmlns:th="http://www.thymeleaf.org">-->

<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--</head>-->
<!--<body>-->

<!--<div class="container">-->
<!--    <header>-->
<!--        <nav class="navigation">-->
<!--            <ul>-->
<!--                <li><a href="my_library">도서함</a></li>-->
<!--                <li><a href="mypage">내정보</a></li>-->
<!--                <li><a href="recommend">도서추천</a></li>-->
<!--            </ul>-->
<!--        </nav>-->
<!--        <p th:text="'name: ' + ${name} "></p>-->
<!--        <p th:text="'username: ' + ${username} "></p>-->
<!--        &lt;!&ndash;        <button class="login-button">로그인</button>   로그아웃으로 만들기 &ndash;&gt;-->
<!--    </header>-->

<!--    <h1>recommend 도서 추천 페이지</h1>-->

<!--    &lt;!&ndash; 날짜 &ndash;&gt;-->
<!--    <div class="date-picker-container">-->
<!--        <label id="current-date">📅</label>-->
<!--    </div>-->

<!--    &lt;!&ndash; 일기 작성 &ndash;&gt;-->

<!--&lt;!&ndash;    <div class="diary-section">&ndash;&gt;-->
<!--&lt;!&ndash;        <form action="/recommend" method="post">&ndash;&gt;-->
<!--&lt;!&ndash;            <div class="input-container">&ndash;&gt;-->
<!--&lt;!&ndash;                <label for="content">오늘의 하루는 어땠나요? </label>&ndash;&gt;-->
<!--&lt;!&ndash;                <input type="text" id="content" name="content" required>&ndash;&gt;-->
<!--&lt;!&ndash;            </div>&ndash;&gt;-->
<!--&lt;!&ndash;            <button class="save-button" type="submit">저장</button>&ndash;&gt;-->
<!--&lt;!&ndash;        </form>&ndash;&gt;-->
<!--&lt;!&ndash;    </div>&ndash;&gt;-->

<!--    <div class="diary-section">-->
<!--        &lt;!&ndash; 파일 업로드 &ndash;&gt;-->
<!--        <div class="diary-writing" id="diary-writing">-->
<!--            <div id="speech-bubble" class="speech-bubble">일기 작성하자!</div>-->
<!--            <img id="image-preview" class="image-preview" alt="" />-->
<!--            <button id="upload-button">이미지 업로드</button>-->
<!--            <input type="file" id="file-upload" accept="image/*" style="display: none;" />-->
<!--        </div>-->

<!--        &lt;!&ndash; 검색 옵션 섹션 &ndash;&gt;-->
<!--        <div class="keyword-section">-->
<!--            <h2>도서 분야</h2>-->
<!--            <form>-->
<!--                <label>-->
<!--                    <input type="radio" name="search-option" value="어린이 전체" checked>-->
<!--                    어린이 전체-->
<!--                </label>-->

<!--                <label>-->
<!--                    <input type="radio" name="search-option" value="어린이 문학">-->
<!--                    어린이 문학-->
<!--                </label>-->

<!--                <label>-->
<!--                    <input type="radio" name="search-option" value="어린이 교양">-->
<!--                    어린이 교양-->
<!--                </label>-->

<!--                <label>-->
<!--                    <input type="radio" name="search-option" value="어린이 만화">-->
<!--                    어린이 만화-->
<!--                </label>-->
<!--            </form>-->
<!--            <button id="recommend-button" class="recommend-button">추천 받기</button>-->
<!--        </div>-->

<!--        &lt;!&ndash; 오늘의 일기 &ndash;&gt;-->
<!--        <div class="today-diary">-->
<!--            <h2>오늘의 일기</h2>-->
<!--            <textarea id="diary-text" placeholder="오늘의 하루는 어땠나요?" readonly></textarea>-->
<!--            <p id="image-url" style="word-wrap: break-word; color: blue; cursor: pointer;"></p> &lt;!&ndash; 이미지 URL 표시 &ndash;&gt;-->
<!--        </div>-->

<!--        <button class="save-button" type="submit">저장</button>-->
<!--    </div>-->



<!--</div>-->

<!--&lt;!&ndash; JavaScript &ndash;&gt;-->
<!--<script>-->
<!--    const fileInput = document.getElementById('file-upload');-->
<!--    const imagePreview = document.getElementById('image-preview');-->
<!--    const uploadButton = document.getElementById('upload-button');-->
<!--    const speechBubble = document.getElementById('speech-bubble');-->
<!--    const diaryText = document.getElementById('diary-text');-->
<!--    const recommendButton = document.getElementById('recommend-button');-->

<!--    // 오늘 날짜를 계산하고 표시하는 함수-->
<!--    function displayCurrentDate() {-->
<!--        const dateElement = document.getElementById('display-date');-->
<!--        const today = new Date();-->

<!--        // 날짜 형식: YYYY년 MM월 DD일-->
<!--        const formattedDate = `${today.getFullYear()}년 ${today.getMonth() + 1}월 ${today.getDate()}일`;-->

<!--        // 요소에 날짜를 삽입-->
<!--        dateElement.textContent = formattedDate;-->
<!--    }-->

<!--    // 페이지가 로드될 때 날짜 표시-->
<!--    window.onload = displayCurrentDate;-->

<!--    let uploadedFile = null; // 업로드된 파일 저장-->

<!--    // 이미지 업로드 버튼 클릭-->
<!--    uploadButton.addEventListener('click', function () {-->
<!--        fileInput.click();-->
<!--    });-->

<!--    // 이미지 업로드 후 미리보기 표시-->
<!--    fileInput.addEventListener('change', function () {-->
<!--        const file = fileInput.files[0];-->
<!--        if (file) {-->
<!--            uploadedFile = file; // 파일 저장-->
<!--            const reader = new FileReader();-->
<!--            reader.onload = function (e) {-->
<!--                imagePreview.src = e.target.result;-->
<!--                imagePreview.style.display = 'block';-->
<!--                speechBubble.style.display = 'none';-->
<!--            };-->
<!--            reader.readAsDataURL(file);-->
<!--        }-->
<!--    });-->

<!--    // 추천 받기 버튼 클릭 시 OCR 수행 및 결과 반영-->
<!--    recommendButton.addEventListener('click', async function () {-->
<!--        if (!uploadedFile) {-->
<!--            alert('이미지를 먼저 업로드하세요!');-->
<!--            return;-->
<!--        }-->

<!--        const selectedOption = document.querySelector('input[name="search-option"]:checked').value;-->
<!--        console.log(`선택된 옵션: ${selectedOption}`);-->

<!--        const formData = new FormData();-->
<!--        formData.append('file', uploadedFile);-->

<!--        try {-->
<!--            const response = await fetch('/uploads', { // uploads 경로로 업로드-->
<!--                method: 'POST',-->
<!--                body: formData-->
<!--            });-->

<!--            if (response.ok) {-->
<!--                const result = await response.json();-->
<!--                diaryText.value = result.ocr_text || 'OCR 처리 실패';-->

<!--                const imageUrlElement = document.getElementById('image-url');-->
<!--                imageUrlElement.textContent = result.image_url || '이미지 URL 없음';-->
<!--                imageUrlElement.onclick = () => {-->
<!--                    if (result.image_url) {-->
<!--                        window.open(result.image_url, '_blank');-->
<!--                    }-->
<!--                };-->

<!--                // 서버로 데이터 전송 (OCR text와 image_url만)-->
<!--                const saveResponse = await fetch('/recommend', {-->
<!--                    method: 'POST',-->
<!--                    headers: {-->
<!--                        'Content-Type': 'application/json'-->
<!--                    },-->
<!--                    body: JSON.stringify({-->
<!--                        content: result.ocr_text || '',   // DiaryDto의 content-->
<!--                        image_url: result.image_url || ''  // DiaryDto의 image_url-->
<!--                    })-->
<!--                });-->
<!--                if (saveResponse.ok) {-->
<!--                    console.log('Diary saved successfully!');-->
<!--                } else {-->
<!--                    console.error('Failed to save diary.');-->
<!--                }-->

<!--            } else {-->
<!--                alert('OCR 요청에 실패했습니다.');-->
<!--            }-->
<!--        } catch (error) {-->
<!--            alert('서버 오류가 발생했습니다.');-->
<!--        }-->
<!--    });-->
<!--</script>-->

<!--</body>-->
<!--</html>-->